<!-- index.html -->
<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Irricontrol</title>

  <!-- CSS -->
  <link rel="stylesheet" href="./assets/css/base.css">
  <link rel="stylesheet" href="./assets/css/layout.css">
  <link rel="stylesheet" href="./assets/css/components.css">
  <link rel="stylesheet" href="./assets/css/pages/mapa.css">
  <link rel="stylesheet" href="./assets/css/pages/chuva-geo.css">
  <link rel="stylesheet" href="./assets/css/pages/pluviometria.css">
  <link rel="stylesheet" href="./assets/css/pages/pluviometria-edit.css">
  <link rel="stylesheet" href="./assets/css/pages/fazenda-edit.css">
  <link rel="stylesheet" href="./assets/css/pages/talhoes.css">
  <link rel="stylesheet" href="./assets/css/pages/relatorios.css">
  <link rel="stylesheet" href="./assets/css/pages/create-equipment.css">
  <link rel="stylesheet" href="./assets/css/pages/pivos.css">
  <link rel="stylesheet" href="./assets/css/pages/monitoramento.css">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
</head>

<body>
  <div class="app">

    <!-- SIDEBAR (azul escuro) -->
    <aside class="sidebar">
      <div class="sidebar__brand">
        <button class="brand-btn" type="button" id="btnSidebarToggle" aria-label="Alternar menu">
          <!-- logo grande (sidebar aberto) -->
          <img class="brand__logo brand__logo--full" src="./assets/img/brand/irricontrol-logo.svg" alt="Irricontrol" />

          <!-- logo pequena (sidebar fechado) -->
          <img class="brand__logo brand__logo--mini" src="./assets/img/brand/irricontrol-brand.svg" alt="Irricontrol" />
        </button>
      </div>

      <div class="sidebar__search farm-search" id="farmSearch">
        <div class="farm-search__field">
          <input class="input input--dark farm-search__input" id="farmSearchInput" type="text"
            placeholder="Buscar fazenda" />
          <span class="farm-search__icon" aria-hidden="true">
            <i class="fa-solid fa-magnifying-glass icon-search"></i>
            <i class="fa-solid fa-chevron-down icon-chevron"></i>
          </span>
        </div>
        <div class="farm-search__panel" id="farmSearchPanel" aria-hidden="true">
          <div class="farm-list" id="farmList" aria-label="Lista de fazendas"></div>
        </div>
      </div>
      <div class="sidebar__create">
        <button class="btn btn--primary sidebar__create-btn" type="button" id="btnCreateFarm">
          <i class="fa-solid fa-circle-plus" aria-hidden="true"></i>
          Criar fazenda
        </button>
      </div>

      <nav class="sidebar__nav">
        <div class="nav__section">
          <div class="nav__title">FAZENDA</div>

          <a class="nav__item is-active" href="#" data-route="mapa">
            <span class="nav__ico"><img src="./assets/img/svg/map-pin.svg" alt="Mapa"></span>
            <span class="nav__label">Mapa</span>
          </a>

          <a class="nav__item" href="#" data-route="gestao">
            <span class="nav__ico"><img src="./assets/img/svg/chart-no-axes-combined.svg" alt="Gestão"></span>
            <span class="nav__label">Gestão Operacional</span>
          </a>

          <a class="nav__item" href="#" data-route="conectividade">
            <span class="nav__ico"><img src="./assets/img/svg/wifi.svg" alt="Conectividade"></span>
            <span class="nav__label">Conectividade</span>
          </a>

          <a class="nav__item" href="#" data-route="notificações">
            <span class="nav__ico"><img src="./assets/img/svg/bell.svg" alt="Notificações"></span>
            <span class="nav__label">Notificações</span>
          </a>
        </div>

        <div class="nav__section">
          <div class="nav__title">GERENCIAL</div>

          <a class="nav__item" href="#" data-route="fazenda">
            <span class="nav__ico"><img src="./assets/img/svg/tractor.svg" alt="Fazenda"></span>
            <span class="nav__label">Fazenda</span>
          </a>

          <a class="nav__item" href="#" data-route="usuarios">
            <span class="nav__ico"><img src="./assets/img/svg/user.svg" alt="Usuários"></span>
            <span class="nav__label">Usuários</span>
          </a>

          <a class="nav__item" href="#" data-route="equipamentos">
            <span class="nav__ico"><img src="./assets/img/svg/dollar.svg" alt="Faturamento"></span>
            <span class="nav__label">Faturamento</span>
          </a>

          <a class="nav__item" href="#" data-route="talhoes">
            <span class="nav__ico"><img src="./assets/img/svg/land-plot.svg" alt="Talhões"></span>
            <span class="nav__label">Talhões</span>
          </a>
        </div>

        <div class="nav__section">
          <div class="nav__title">RELATÓRIOS DA FAZENDA</div>

          <a class="nav__item" href="#" data-route="relatorios">
            <span class="nav__ico"><img src="./assets/img/svg/report.svg" alt="Relatórios"></span>
            <span class="nav__label">Relatórios de Pivôs</span>
          </a>
        </div>

        <div class="nav__section">
          <div class="nav__title">CLIMA</div>

          <a class="nav__item" href="#" data-route="pluviometria">
            <span class="nav__ico"><img src="./assets/img/svg/cloud-hail.svg" alt="Pluviometria"></span>
            <span class="nav__label">Pluviometria</span>
          </a>

        </div>

        <div class="nav__section">
          <div class="nav__title">SENSORIAMENTO REMOTO</div>

          <a class="nav__item" href="#" data-route="monitoramento">
            <span class="nav__ico"><img src="./assets/img/svg/radar.svg" alt="Monitoramento"></span>
            <span class="nav__label">Monitoramento</span>
          </a>
        </div>
      </nav>
    </aside>

    <!-- ÁREA DO MAPA (tela toda fora do sidebar) -->
    <main class="main main--map">
      <aside class="map-card" id="mapCard" aria-label="Resumo da fazenda">
        <header class="map-card__header">
          <div class="map-card__title">
            <h2>Fazenda Santa Clara</h2>
          </div>
          <button class="map-card__edit" type="button" aria-label="Editar fazenda">
            <i class="fa-solid fa-pen"></i>
          </button>
        </header>

        <div class="map-card__search">
          <span class="map-card__search-ico">
            <i class="fa-solid fa-wifi"></i>
          </span>
          <input class="map-card__input" id="mapSearchInput" name="map_search" type="text" placeholder="Ex: Pivo 1" />
          <button class="map-card__chev" type="button" aria-label="Abrir filtros">
            <i class="fa-solid fa-chevron-down"></i>
          </button>
        </div>

        <nav class="map-card__list" aria-label="Categorias de equipamentos">
          <button class="map-card__item map-card__item--toggle" type="button" data-panel="pivos" aria-expanded="false">
            <span>Pivôs</span>
            <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="map-card__panel" data-panel="pivos" aria-hidden="true" data-equip-list="pivos"></div>
          <button class="map-card__item map-card__item--toggle" type="button" data-panel="bombas" aria-expanded="false">
            <span>Bombas</span>
            <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="map-card__panel" data-panel="bombas" aria-hidden="true" data-equip-list="bombas"></div>

          <button class="map-card__item map-card__item--toggle" type="button" data-panel="medidores"
            aria-expanded="false">
            <span>Medidores de Nível</span>
            <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="map-card__panel" data-panel="medidores" aria-hidden="true" data-equip-list="medidores"></div>

          <button class="map-card__item map-card__item--toggle" type="button" data-panel="repetidoras"
            aria-expanded="false">
            <span>Repetidoras</span>
            <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="map-card__panel" data-panel="repetidoras" aria-hidden="true" data-equip-list="repetidoras"></div>

          <button class="map-card__item map-card__item--toggle" type="button" data-panel="carreteis"
            aria-expanded="false">
            <span>Carretéis</span>
            <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="map-card__panel" data-panel="carreteis" aria-hidden="true" data-equip-list="carreteis"></div>

          <button class="map-card__item map-card__item--toggle" type="button" data-panel="estacoes"
            aria-expanded="false">
            <span>Estações Meteorológicas</span>
            <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="map-card__panel" data-panel="estacoes" aria-hidden="true" data-equip-list="estacoes"></div>
        </nav>

        <div class="map-card__footer">
          <button class="map-card__cta" type="button" id="btnCreateEquipment">
            <span class="map-card__cta-ico"><i class="fa-solid fa-plus"></i></span>
            Criar equipamento
          </button>
        </div>
      </aside>

      <div class="map-toast" id="farmApiToast" role="status" aria-live="polite" aria-hidden="true">
        <span class="map-toast__icon" aria-hidden="true"><i class="fa-solid fa-triangle-exclamation"></i></span>
        <div class="map-toast__content">
          <div class="map-toast__title">Servidor local offline</div>
          <div class="map-toast__text" data-toast-text>Inicie o backend para salvar fazendas.</div>
        </div>
      </div>
      <div id="map" class="map">
        <div class="map-equip" id="mapEquip" aria-label="Equipamentos">
          <button class="map-equip__bar" type="button" aria-expanded="false" aria-controls="mapEquipPanel">
            <span class="map-equip__icon">
              <i class="fa-solid fa-filter" aria-hidden="true"></i>
            </span>
            <span class="map-equip__label">Equipamentos</span>
            <span class="map-equip__chev">
              <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
            </span>
          </button>

          <div class="map-equip__panel" id="mapEquipPanel" role="region" aria-label="Filtros de equipamentos">
            <label class="map-equip__row">
              <span>Todos</span>
              <input class="map-equip__switch" type="checkbox" checked aria-label="Todos">
            </label>
            <label class="map-equip__row">
              <span>Pivôs</span>
              <input class="map-equip__switch" type="checkbox" checked aria-label="Pivôs">
            </label>
            <label class="map-equip__row">
              <span>Bombas</span>
              <input class="map-equip__switch" type="checkbox" checked aria-label="Bombas">
            </label>
            <label class="map-equip__row">
              <span>Medidores de Nível</span>
              <input class="map-equip__switch" type="checkbox" checked aria-label="Medidores de Nível">
            </label>
            <label class="map-equip__row">
              <span>Repetidoras</span>
              <input class="map-equip__switch" type="checkbox" checked aria-label="Repetidoras">
            </label>
            <label class="map-equip__row">
              <span>Carretéis</span>
              <input class="map-equip__switch" type="checkbox" checked aria-label="Carretéis">
            </label>
            <label class="map-equip__row">
              <span>Talhões</span>
              <input class="map-equip__switch" type="checkbox" checked aria-label="Talhões">
            </label>
            <label class="map-equip__row">
              <span>Estações Meteorológicas</span>
              <input class="map-equip__switch" type="checkbox" checked aria-label="Estações Meteorológicas">
            </label>
          </div>
        </div>
        <div class="pluv-mapbar" aria-label="Período e relatório de pluviometria">
          <div class="pluv-mapbar__period toolbar" role="group" aria-label="Período">
            <span class="pluv-mapbar__label">Período</span>
            <button class="pluv-mapbar__range toolbar__btn" type="button" aria-label="Selecionar período">
              <span class="pluv-mapbar__range-start">29/01/2026</span>
              <span class="pluv-mapbar__sep">&rarr;</span>
              <span class="pluv-mapbar__range-end">30/01/2026</span>
              <i class="fa-solid fa-calendar-days"></i>
            </button>
          </div>
          <button class="pluv-mapbar__report" type="button">
            <i class="fa-solid fa-eye"></i>
            Dados de pluviometria
          </button>
        </div>
        <div class="pluv-layer-slot" id="pluvLayerSlot" aria-live="polite"></div>
      </div>
      <div id="pageSlot" aria-live="polite"></div>
    </main>

  </div>

  <div class="create-equip" id="createEquipmentModal" aria-hidden="true">
    <div class="create-equip__backdrop" data-close-create></div>
    <section class="create-equip__dialog" role="dialog" aria-modal="true" aria-labelledby="createEquipTitle">
      <header class="create-equip__header">
        <h3 class="create-equip__title" id="createEquipTitle">Criar equipamento</h3>
        <button class="create-equip__close" type="button" aria-label="Fechar" data-close-create>
          <i class="fa-solid fa-xmark"></i>
        </button>
      </header>

      <div class="create-equip__steps" id="createEquipSteps" aria-hidden="true"></div>

      <div class="create-equip__grid" role="list">
        <button class="create-equip__card card" type="button" role="listitem" data-equip="smart_connect">
          <img class="create-equip__img" src="./assets/img/equipamentos/smart_connect.png" alt="" />
          <div class="create-equip__card-body">
            <div class="create-equip__card-title">SmartConnect ou Nexus</div>
            <div class="create-equip__card-desc">
              Painéis de controle SmartConnect ou Nexus para controle e monitoramento de pivôs centrais.
            </div>
          </div>
        </button>

        <button class="create-equip__card card" type="button" role="listitem" data-equip="smarttouch">
          <img class="create-equip__img" src="./assets/img/equipamentos/smarttouch.png" alt="" />
          <div class="create-equip__card-body">
            <div class="create-equip__card-title">SmartTouch</div>
            <div class="create-equip__card-desc">
              Painel de controle Bauer SmartTouch para controle e monitoramento de pivôs centrais.
            </div>
          </div>
        </button>

        <button class="create-equip__card card" type="button" role="listitem" data-equip="rainstar">
          <img class="create-equip__img" src="./assets/img/equipamentos/rainstar.png" alt="" />
          <div class="create-equip__card-body">
            <div class="create-equip__card-title">Carretel</div>
            <div class="create-equip__card-desc">
              Carretéis Bauer da série Rainstar com Ecostar embarcada.
            </div>
          </div>
        </button>

        <button class="create-equip__card card" type="button" role="listitem" data-equip="irripump">
          <img class="create-equip__img" src="./assets/img/equipamentos/irripump.png" alt="" />
          <div class="create-equip__card-body">
            <div class="create-equip__card-title">Irripump</div>
            <div class="create-equip__card-desc">
              Painel de controle de bombeamentos para a casa de bombas.
            </div>
          </div>
        </button>

        <button class="create-equip__card card" type="button" role="listitem" data-equip="repetidora">
          <img class="create-equip__img" src="./assets/img/equipamentos/repetidora.png" alt="" />
          <div class="create-equip__card-body">
            <div class="create-equip__card-title">Repetidora</div>
            <div class="create-equip__card-desc">
              Repetidoras de sinal, solares ou bivolt, para a rede mesh Irricontrol.
            </div>
          </div>
        </button>

        <button class="create-equip__card card" type="button" role="listitem" data-equip="medidor">
          <img class="create-equip__img" src="./assets/img/equipamentos/medidor.png" alt="" />
          <div class="create-equip__card-body">
            <div class="create-equip__card-title">Medidor de Nível</div>
            <div class="create-equip__card-desc">
              Medidor de nível para monitoramento de poços, rios e reservatórios.
            </div>
          </div>
        </button>

        <button class="create-equip__card card" type="button" role="listitem" data-equip="estacao_metereologica">
          <img class="create-equip__img" src="./assets/img/equipamentos/estacao_metereologica.png" alt="" />
          <div class="create-equip__card-body">
            <div class="create-equip__card-title">Estação Meteorológica</div>
            <div class="create-equip__card-desc">
              Estações meteorológicas Davis para monitoramento de microclima e acesso à previsão do tempo.
            </div>
          </div>
        </button>

        <button class="create-equip__card card" type="button" role="listitem" data-equip="pluviometro">
          <img class="create-equip__img" src="./assets/img/equipamentos/pluviometro.png" alt="" />
          <div class="create-equip__card-body">
            <div class="create-equip__card-title">Pluviômetro</div>
            <div class="create-equip__card-desc">
              Pluviômetro para monitoramento de chuva e precipitação.
            </div>
          </div>
        </button>
      </div>
      <footer class="create-equip__footer" id="createEquipFooter">
        <div class="create-equip__footer-right">
          <button class="create-equip__btn btn" type="button" id="btnCreateEquipPrev">
            Anterior
          </button>

          <button class="create-equip__btn create-equip__btn--primary btn" type="button" id="btnCreateEquipNext">
            Próximo
          </button>
        </div>
      </footer>
    </section>
  </div>

  <div class="create-equip create-farm" id="createFarmModal" aria-hidden="true">
    <div class="create-equip__backdrop" data-close-farm></div>
    <section class="create-equip__dialog" role="dialog" aria-modal="true" aria-labelledby="createFarmTitle">
      <header class="create-equip__header">
        <h3 class="create-equip__title" id="createFarmTitle">Criar fazenda</h3>
        <button class="create-equip__close" type="button" aria-label="Fechar" data-close-farm>
          <i class="fa-solid fa-xmark"></i>
        </button>
      </header>

      <div class="create-equip__steps" id="createFarmSteps" aria-hidden="true"></div>

      <div class="create-equip__dynamic" id="createFarmBody"></div>

      <footer class="create-equip__footer" id="createFarmFooter">
        <div class="create-equip__footer-right">
          <button class="create-equip__btn btn" type="button" id="btnCreateFarmPrev">
            Anterior
          </button>

          <button class="create-equip__btn create-equip__btn--primary btn" type="button" id="btnCreateFarmNext">
            Próximo
          </button>
        </div>
      </footer>
    </section>
  </div>

  <!-- Leaflet -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <script src="./assets/js/vendor/leaflet-heat.js"></script>
  <!-- Modulo Pivot (Novo) -->
  <script src="./assets/js/pages/pivos/index.js"></script>
  <script src="./assets/js/pages/pivos/view.data.js"></script>
  <script src="./assets/js/pages/pivos/view.charts.js"></script>
  <script src="./assets/js/pages/pivos/view.details.js"></script>

  <!-- JS -->
  <script src="./assets/js/ui/sidebar.js"></script>
  <script src="./assets/js/pages/mapa.js"></script>

  <!-- equipamentos -->
  <script src="./assets/js/pages/equipamentos/smart-connect.js"></script>
  <script src="./assets/js/pages/equipamentos/smarttouch.js"></script>
  <script src="./assets/js/pages/equipamentos/irripump.js"></script>
  <script src="./assets/js/pages/equipamentos/medidor.js"></script>
  <script src="./assets/js/pages/equipamentos/rainstar.js"></script>
  <script src="./assets/js/pages/equipamentos/repetidora.js"></script>
  <script src="./assets/js/pages/equipamentos/estacao-metereologica.js"></script>
  <script src="./assets/js/pages/equipamentos/pluviometro.js"></script>

  <!-- pages -->
  <script>
    window.IC_FARM_API_URL = window.IC_FARM_API_URL || "http://localhost:3000/api/farms";
  </script>
  <script src="./assets/js/pages/create-equipment.js"></script>
  <script src="./assets/js/pages/create-farm/core.state.js"></script>
  <script src="./assets/js/pages/create-farm/core.rules.js"></script>
  <script src="./assets/js/pages/create-farm/view.map.js"></script>
  <script src="./assets/js/pages/create-farm/view.render.js"></script>
  <script src="./assets/js/pages/create-farm/feature.events.js"></script>
  <script src="./assets/js/pages/create-farm/index.js"></script>
  <script src="./assets/js/pages/pluviometria.js"></script>
  <script src="./assets/js/pages/pluviometria/core.data.js"></script>
  <script src="./assets/js/pages/pluviometria/core.state.js"></script>
  <script src="./assets/js/pages/pluviometria/core.dom.js"></script>
  <script src="./assets/js/pages/pluviometria/feature.periodPicker.js"></script>
  <script src="./assets/js/pages/pluviometria/feature.cards.js"></script>
  <script src="./assets/js/pages/pluviometria/feature.rain.js"></script>
  <script src="./assets/js/pages/pluviometria/feature.events.js"></script>
  <script src="./assets/js/pages/pluviometria/feature.maintenance.js"></script>
  <script src="./assets/js/pages/pluviometria/feature.reports.js"></script>
  <script src="./assets/js/pages/pluviometria/view.map.js"></script>
  <script src="./assets/js/pages/pluviometria/view.data.js"></script>
  <script src="./assets/js/pages/pluviometria/view.edit.js"></script>
  <script src="./assets/js/pages/pluviometria/index.js"></script>
  <!-- Modulo Pivot (Novo) -->
  <script src="./assets/js/pages/pivos/index.js"></script>
  <script src="./assets/js/pages/pivos/view.data.js"></script>
  <script src="./assets/js/pages/pivos/view.charts.js"></script>
  <script src="./assets/js/pages/pivos/view.details.js"></script>
  <script src="./assets/js/pages/fazenda-edit/index.js"></script>
  <script src="./assets/js/pages/talhoes/index.js"></script>
  <script src="./assets/js/pages/relatorios/index.js"></script>
  <script src="./assets/js/pages/monitoramento/index.js"></script>
  <script src="./assets/js/pages/chuva-geo/core.data.js"></script>
  <script src="./assets/js/pages/chuva-geo/core.state.js"></script>
  <script src="./assets/js/pages/chuva-geo/core.dom.js"></script>
  <script src="./assets/js/pages/chuva-geo/layers.rain.js"></script>
  <script src="./assets/js/pages/chuva-geo/layers.irrigation.js"></script>
  <script src="./assets/js/pages/chuva-geo/ui.panel.js"></script>
  <script src="./assets/js/pages/chuva-geo/index.js"></script>
  <script src="./assets/js/pages/chuva-geo.js"></script>
  <script src="./assets/js/app.js"></script>

</body>

</html>